const fs = require("fs");
//const solc = require('solc');
var Web3 = require('web3');
if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
} else {
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}
if (!web3.isConnected()) {
    console.error("Ethereum - no conection to RPC server");
} else {
    console.log("Ethereum - connected to RPC server");
}
web3.eth.getTransactionReceiptMined = require("./getTransactionReceiptMined.js");

const account = web3.eth.accounts[0];
web3.personal.unlockAccount(account,unlockingPassword,1000);
// we only need the multi sig napoleonX wallet
var napoleonXMultiSigWalletAddress  = "0xf1565df2b02ac6d756a1a594b180d34ee3438be8";
// Date.now().getTime() to test
// be careful months start at 0
// var d = new Date(2017,08,29);
var d = new Date(2017,07,05);
var setStartTime = d.getTime()/1000;
var napoleonxcrowdsaleAbi = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_TOKEN_AMOUNT_INVESTMENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"greenlistTotalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"investedAmountOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MIN_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEndTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"endTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_startTime","type":"uint256"}],"name":"setStartTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"weiRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEtherRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_GREENLIST_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"halt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"min_cap","type":"uint256"},{"name":"max_cap","type":"uint256"}],"name":"setTestingCap","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"getBackEtherTest","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"newFounder","type":"address"}],"name":"changeFounder","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MAX_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"FOUNDER_ALLOCATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"bountyPercentage","type":"uint256"}],"name":"allocateBountyTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committer","type":"address"},{"name":"value","type":"uint256"}],"name":"registerCommitment","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocationInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"halted","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allocateFounderTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committers","type":"address[]"},{"name":"values","type":"uint256[]"}],"name":"populateExistingGreenList","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"transferLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"GREENLIST_DISCOUNT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleTokenSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"unhalt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_endTime","type":"uint256"}],"name":"setEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_presaleEndTime","type":"uint256"}],"name":"setPresaleEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"buyTokens","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"discountInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ONE_NPX_TOKEN_PRICE","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getICOStage","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_committer","type":"address"}],"name":"commitmentOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"safeWithdrawal","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"_napoleonXMultiSigWallet","type":"address"},{"name":"setStartTime","type":"uint256"}],"payable":false,"type":"constructor"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"Buy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"PresaleBuy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"eth","type":"uint256"}],"name":"Withdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateFounderTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateBountyTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"investor","type":"address"},{"indexed":false,"name":"weiAmount","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
var napoleonxcrowdsaleByteCode ='0x606060405260006005556000600655600060075569054b40b1f852bda000006008556934f086f3b33b68400000600955736551f97f7d133083b11c0350c5fa83eefee8000d600c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600d60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600e60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600f60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506249d4006013556293a8006014556293a8006015556000601660006101000a81548160ff0219169083151502179055506000601660016101000a81548160ff0219169083151502179055506000601660026101000a81548160ff02191690831515021790555034156101f457600080fd5b604051604080613321833981016040528080519060200190919080519060200190919050505b33600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060108190555062093a80601054016012819055506224ea0062093a8060105401016011819055505b50505b61304a806102d76000396000f3006060604052361561024f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde0314610730578063095ea7b3146107bf57806318160ddd14610819578063193b80421461084257806319800d1b1461086b5780631aae3460146108945780631bc59aa6146108e157806323b872dd1461090e5780632439a4f614610987578063249b7c19146109b0578063313ce567146109d95780633197cbb614610a025780633e0a322d14610a2b5780634042b66f14610a4e57806344b4995814610a7757806344e0260914610aa05780635ed7ca5b14610ac95780636c04ffbc14610ade57806370a0823114610b0a57806370dbe91b14610b5757806378e9792514610b8057806382846e8414610ba957806383e811a614610bbe57806393c32e0614610be7578063943762d114610c2057806394d32a5d14610c4957806395d89b4114610c7257806399d22e4814610d015780639c6bdcb514610d2e5780639f19bc2f14610d51578063a9059cbb14610d93578063b7c6566814610ded578063b9b8af0b14610e16578063bcfcb03e14610e43578063c12f83c514610e58578063c24fe21b14610ef2578063c2e1d45514610f1b578063c4fc3a3b14610f44578063cb3e64fd14610f6d578063ccb98ffc14610f82578063cfa0136f14610fa5578063d0febe4c14610fc8578063d2e9c4a514610fd2578063dbe7e6f414610ffb578063dd62ed3e14611024578063e2646a9f14611090578063e9d8d3d71461111f578063f662b88114611148578063fd6b7ef814611195575b5b600080600080600080600080600080600060105480421015151561027357600080fd5b601154804210151561028457600080fd5b601660009054906101000a900460ff161515156102a057600080fd5b6009546102af600554346111aa565b111515156102bc57600080fd5b349c50601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b5061030a336111d5565b9a50601254421015610550576103208c8e6111aa565b9950662386f26fc100008a81151561033457fe5b04985060008b141561034557600080fd5b8a8a101580156103645750600a8b600f0281151561035f57fe5b048a11155b1561037f57606460146064018a0281151561037b57fe5b0498505b600a8b600f0281151561038e57fe5b048a111561041b57600a8b600f028115156103a557fe5b048c11151561041a576103c7600a8c600f028115156103c057fe5b048d61121f565b97506103d38d8961121f565b9650662386f26fc10000888115156103e757fe5b049550662386f26fc10000878115156103fc57fe5b04945060646014606401870281151561041157fe5b04955085850198505b5b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549350886000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506104ab6006548561121f565b6006819055506104bd6006548a6111aa565b6006819055506104cf6002548561121f565b6002819055506104e16002548a6111aa565b6002819055506104f36007548e6111aa565b6007819055503373ffffffffffffffffffffffffffffffffffffffff167fb77d41b776d1d5cc75b500402614335da616afa8aa95b49325e22db7f1ca86cc8b8b604051808381526020018281526020019250505060405180910390a25b6012544210151561067e57662386f26fc100008d81151561056d57fe5b049250606461057a611239565b606401840281151561058857fe5b0492506105d36000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054846111aa565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610621600254846111aa565b6002819055503373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e85604051808381526020018281526020019250505060405180910390a25b6106c7601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e6111aa565b601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506107166005548e6111aa565b6005819055505b5b5b5b505b505050505050505050505050005b341561073b57600080fd5b610743611312565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156107845780820151818401525b602081019050610768565b50505050905090810190601f1680156107b15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156107ca57600080fd5b6107ff600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061134b565b604051808215151515815260200191505060405180910390f35b341561082457600080fd5b61082c61143e565b6040518082815260200191505060405180910390f35b341561084d57600080fd5b610855611444565b6040518082815260200191505060405180910390f35b341561087657600080fd5b61087e611449565b6040518082815260200191505060405180910390f35b341561089f57600080fd5b6108cb600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061144f565b6040518082815260200191505060405180910390f35b34156108ec57600080fd5b6108f4611467565b604051808215151515815260200191505060405180910390f35b341561091957600080fd5b61096d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061147a565b604051808215151515815260200191505060405180910390f35b341561099257600080fd5b61099a6114a5565b6040518082815260200191505060405180910390f35b34156109bb57600080fd5b6109c36114ab565b6040518082815260200191505060405180910390f35b34156109e457600080fd5b6109ec6114b1565b6040518082815260200191505060405180910390f35b3415610a0d57600080fd5b610a156114b6565b6040518082815260200191505060405180910390f35b3415610a3657600080fd5b610a4c60048080359060200190919050506114bc565b005b3415610a5957600080fd5b610a61611524565b6040518082815260200191505060405180910390f35b3415610a8257600080fd5b610a8a61152a565b6040518082815260200191505060405180910390f35b3415610aab57600080fd5b610ab3611530565b6040518082815260200191505060405180910390f35b3415610ad457600080fd5b610adc611537565b005b3415610ae957600080fd5b610b0860048080359060200190919080359060200190919050506115b2565b005b3415610b1557600080fd5b610b41600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611622565b6040518082815260200191505060405180910390f35b3415610b6257600080fd5b610b6a61166b565b6040518082815260200191505060405180910390f35b3415610b8b57600080fd5b610b93611671565b6040518082815260200191505060405180910390f35b3415610bb457600080fd5b610bbc611677565b005b3415610bc957600080fd5b610bd1611711565b6040518082815260200191505060405180910390f35b3415610bf257600080fd5b610c1e600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611717565b005b3415610c2b57600080fd5b610c336117b9565b6040518082815260200191505060405180910390f35b3415610c5457600080fd5b610c5c6117bf565b6040518082815260200191505060405180910390f35b3415610c7d57600080fd5b610c856117c4565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610cc65780820151818401525b602081019050610caa565b50505050905090810190601f168015610cf35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3415610d0c57600080fd5b610d146117fd565b604051808215151515815260200191505060405180910390f35b3415610d3957600080fd5b610d4f6004808035906020019091905050611810565b005b3415610d5c57600080fd5b610d91600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611cd5565b005b3415610d9e57600080fd5b610dd3600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611d87565b604051808215151515815260200191505060405180910390f35b3415610df857600080fd5b610e00611db0565b6040518082815260200191505060405180910390f35b3415610e2157600080fd5b610e29611e23565b604051808215151515815260200191505060405180910390f35b3415610e4e57600080fd5b610e56611e36565b005b3415610e6357600080fd5b610ef06004808035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190505061201f565b005b3415610efd57600080fd5b610f056120f2565b6040518082815260200191505060405180910390f35b3415610f2657600080fd5b610f2e6120f8565b6040518082815260200191505060405180910390f35b3415610f4f57600080fd5b610f576120fd565b6040518082815260200191505060405180910390f35b3415610f7857600080fd5b610f80612103565b005b3415610f8d57600080fd5b610fa3600480803590602001909190505061217e565b005b3415610fb057600080fd5b610fc660048080359060200190919050506121e6565b005b610fd061224e565b005b3415610fdd57600080fd5b610fe5611239565b6040518082815260200191505060405180910390f35b341561100657600080fd5b61100e61272e565b6040518082815260200191505060405180910390f35b341561102f57600080fd5b61107a600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050612739565b6040518082815260200191505060405180910390f35b341561109b57600080fd5b6110a36127c1565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156110e45780820151818401525b6020810190506110c8565b50505050905090810190601f1680156111115780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561112a57600080fd5b611132612911565b6040518082815260200191505060405180910390f35b341561115357600080fd5b61117f600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506111d5565b6040518082815260200191505060405180910390f35b34156111a057600080fd5b6111a8612918565b005b60008082840190506111ca8482101580156111c55750838210155b612b07565b8091505b5092915050565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b600061122d83831115612b07565b81830390505b92915050565b60008060105442108061124e57506011544210155b1561125e5761125d6000612b07565b5b6014905042620151806010540110806112825750690878678326eac9000000600554115b1561128c57600f90505b426201fa406010540110806112ac5750690cb49b44ba602d800000600554115b156112b657600a90505b426202a3006010540110806112d657506910f0cf064dd592000000600554115b156112e057600590505b426203f480601054011080611300575069152d02c7e14af6800000600554115b1561130a57600090505b8091505b5090565b6040805190810160405280600f81526020017f4e61706f6c656f6e5820546f6b656e000000000000000000000000000000000081525081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b600a81565b60045481565b60176020528060005260406000206000915090505481565b601660029054906101000a900460ff1681565b6000601354601154014211151561149057600080fd5b61149b848484612b17565b90505b9392505050565b60085481565b60125481565b600081565b60115481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561151857600080fd5b806010819055505b5b50565b60055481565b60075481565b62093a8081565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561159357600080fd5b6001601660006101000a81548160ff0219169083151502179055505b5b565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561160e57600080fd5b81600881905550806009819055505b5b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b60155481565b60105481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156116d357600080fd5b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60145481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561177357600080fd5b80600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b60095481565b601481565b6040805190810160405280600381526020017f4e5058000000000000000000000000000000000000000000000000000000000081525081565b601660019054906101000a900460ff1681565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561186e57600080fd5b601554601154014211151561188257600080fd5b601660029054906101000a900460ff161561189c57600080fd5b606482600254028115156118ac57fe5b049050611925600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205460048381151561191f57fe5b046111aa565b600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506119a160025460048381151561199b57fe5b046111aa565b600281905550611a1d600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611a1757fe5b046111aa565b600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611a99600254600483811515611a9357fe5b046111aa565b600281905550611b15600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611b0f57fe5b046111aa565b600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611b91600254600483811515611b8b57fe5b046111aa565b600281905550611c0d600080600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611c0757fe5b046111aa565b600080600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001601660026101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167fdd56998c270d613b449ef9fc57334482404fda530366a65772674a9da84da20860405160405180910390a25b5b5050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050611d25600454836111aa565b600481905550611d376004548261121f565b60048190555081600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505050565b60006013546011540142111515611d9d57600080fd5b611da78383612e12565b90505b92915050565b600080600f9050690878678326eac90000006005541115611dd057600a90505b690cb49b44ba602d8000006005541115611de957600890505b6910f0cf064dd5920000006005541115611e0257600590505b69152d02c7e14af68000006005541115611e1b57600390505b8091505b5090565b601660009054906101000a900460ff1681565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611e9457600080fd5b6014546011540142111515611ea857600080fd5b601660019054906101000a900460ff1615611ec257600080fd5b6064611ecc611db0565b60025402811515611ed957fe5b049050611f46600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826111aa565b600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611fb6600254826111aa565b6002819055506001601660016101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f1c8a3821e439862f28669f7fbc210e74e947ebf0e947b591cc5a02e41003026560405160405180910390a25b5b50565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561207d57600080fd5b82826120898282612ffa565b151561209457600080fd5b600092505b84518310156120e8576120da85848151811015156120b357fe5b9060200190602002015185858151811015156120cb57fe5b90602001906020020151611cd5565b5b8280600101935050612099565b5b5b50505b505050565b60135481565b601481565b60065481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561215f57600080fd5b6000601660006101000a81548160ff0219169083151502179055505b5b565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156121da57600080fd5b806011819055505b5b50565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561224257600080fd5b806012819055505b5b50565b600080600080600080600080600080600060105480421015151561227157600080fd5b601154804210151561228257600080fd5b601660009054906101000a900460ff1615151561229e57600080fd5b6009546122ad600554346111aa565b111515156122ba57600080fd5b349c50601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b50612308336111d5565b9a5060125442101561254e5761231e8c8e6111aa565b9950662386f26fc100008a81151561233257fe5b04985060008b141561234357600080fd5b8a8a101580156123625750600a8b600f0281151561235d57fe5b048a11155b1561237d57606460146064018a0281151561237957fe5b0498505b600a8b600f0281151561238c57fe5b048a111561241957600a8b600f028115156123a357fe5b048c111515612418576123c5600a8c600f028115156123be57fe5b048d61121f565b97506123d18d8961121f565b9650662386f26fc10000888115156123e557fe5b049550662386f26fc10000878115156123fa57fe5b04945060646014606401870281151561240f57fe5b04955085850198505b5b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549350886000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506124a96006548561121f565b6006819055506124bb6006548a6111aa565b6006819055506124cd6002548561121f565b6002819055506124df6002548a6111aa565b6002819055506124f16007548e6111aa565b6007819055503373ffffffffffffffffffffffffffffffffffffffff167fb77d41b776d1d5cc75b500402614335da616afa8aa95b49325e22db7f1ca86cc8b8b604051808381526020018281526020019250505060405180910390a25b6012544210151561267c57662386f26fc100008d81151561256b57fe5b0492506064612578611239565b606401840281151561258657fe5b0492506125d16000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054846111aa565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061261f600254846111aa565b6002819055503373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e85604051808381526020018281526020019250505060405180910390a25b6126c5601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e6111aa565b601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506127146005548e6111aa565b6005819055505b5b5b5b505b505050505050505050505050565b662386f26fc1000081565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b92915050565b6127c961300a565b601054421015612810576040805190810160405280600981526020017f4e6f7420626567756e0000000000000000000000000000000000000000000000815250905061290e565b601254421015612857576040805190810160405280600f81526020017f50726573616c652072756e6e696e670000000000000000000000000000000000815250905061290e565b6011544210156128c557606060405190810160405280602381526020017f50726573616c6520656e6465642c207374616e646172642049434f2072756e6e81526020017f696e670000000000000000000000000000000000000000000000000000000000815250905061290e565b6011544210151561290d576040805190810160405280600c81526020017f49434f2066696e69736865640000000000000000000000000000000000000000815250905061290e565b5b90565b6224ea0081565b60008060115480421015151561292d57600080fd5b60085460055410159250821515612abf57601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205491506000601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000821115612abe573373ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f1935050505015612a78577fbb28353e4598c3b9199101a66e0989549b659a59a54d2c27fbb183f1932c8e6d3383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1612abd565b81601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b5b8215612b0057600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b5b505050565b801515612b1357600080fd5b5b50565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612be3575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410155b8015612c6c57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15612e0157816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612e0b565b60009050612e0b565b5b9392505050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612edf57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15612fea57816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612ff4565b60009050612ff4565b5b92915050565b6000815183511490505b92915050565b6020604051908101604052806000815250905600a165627a7a72305820c03c9b53ffe0b440ec6b43d8aae4b260db1bc4ee24103328f69c1a54ef6968ae0029';

let napoleonxcrowdsaleGasEstimate = web3.eth.estimateGas({
    data: napoleonxcrowdsaleByteCode
});

console.log(napoleonxcrowdsaleGasEstimate);
web3.personal.unlockAccount(account,unlockingPassword, 1000);
console.log(account);

var napoleonxcrowdsaleContract = web3.eth.contract(napoleonxcrowdsaleAbi);
var napoleonxcrowdsaleContractInstance = napoleonxcrowdsaleContract.new(
   napoleonXMultiSigWalletAddress,
   setStartTime,
   {
     from : account,
     data : napoleonxcrowdsaleByteCode,
     gas :  napoleonxcrowdsaleGasEstimate+1000000
   }, function (err, myContract){
    if (!err) {
        // NOTE: The callback will fire twice!
        // Once the contract has the transactionHash property set and once its deployed on an address.

        // e.g. check tx hash on the first call (transaction send)
        if (!myContract.address) {
            console.log("TransactionHash")
            console.log(myContract.transactionHash) // The hash of the transaction, which deploys the contract

            // check address on the second call (contract deployed)
        } else {
            console.log("Contract deployed at :"+myContract.address);
            //console.log(myContract.address) // the contract address
            //exports.contractAddress = myContract.address;
        }

        // Note that the returned "myContractReturned" === "myContract",
        // so the returned "myContractReturned" object will also get the address set.
    }
    else{
      console.log(err);
    }
 });


var MyReceipt = web3.eth.getTransactionReceiptMined(napoleonxcrowdsaleContractInstance.transactionHash);

// Transaction has entered to geth memory pool
console.log("Your contract is being deployed in transaction at http://ropsten.etherscan.io/tx/" + napoleonxcrowdsaleContractInstance.transactionHash);
