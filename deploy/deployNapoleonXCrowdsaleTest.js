const fs = require("fs");
//const solc = require('solc');
var Web3 = require('web3');
if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
} else {
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}
if (!web3.isConnected()) {
    console.error("Ethereum - no conection to RPC server");
} else {
    console.log("Ethereum - connected to RPC server");
}
web3.eth.getTransactionReceiptMined = require("./getTransactionReceiptMined.js");

const account = web3.eth.accounts[0];
web3.personal.unlockAccount(account,unlockingPassword,1000);
// we only need the multi sig napoleonX wallet
var napoleonXMultiSigWalletAddress  = "0xf1565df2b02ac6d756a1a594b180d34ee3438be8";
// Date.now().getTime() to test
// be careful months start at 0
// var d = new Date(2017,08,29);
var d = new Date(2017,07,05);
var setStartTime = d.getTime()/1000;

var napoleonxcrowdsaleAbi = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"amountSentInWei","type":"uint256"},{"name":"weiSender","type":"address"}],"name":"fallBackDebug","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"greenlistTotalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"investedAmountOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MIN_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEndTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"endTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_startTime","type":"uint256"}],"name":"setStartTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"weiRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_GREENLIST_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"tokensSold","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"halt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"min_cap","type":"uint256"},{"name":"max_cap","type":"uint256"}],"name":"setTestingCap","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"getBackEtherTest","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_OWNABLE_TOKEN_FRACTION_NUMERATOR","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MAX_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"FOUNDER_ALLOCATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"bountyPercentage","type":"uint256"}],"name":"allocateBountyTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committer","type":"address"},{"name":"value","type":"uint256"}],"name":"registerCommitment","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocationInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"halted","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allocateFounderTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committers","type":"address[]"},{"name":"values","type":"uint256[]"}],"name":"populateExistingGreenList","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"transferLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"GREENLIST_DISCOUNT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"unhalt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_endTime","type":"uint256"}],"name":"setEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_presaleEndTime","type":"uint256"}],"name":"setPresaleEndTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discountInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ONE_NPX_TOKEN_PRICE","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getICOStage","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_OWNABLE_TOKEN_FRACTION_DENOMINATOR","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_committer","type":"address"}],"name":"commitmentOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"safeWithdrawal","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"_napoleonXMultiSigWallet","type":"address"},{"name":"setStartTime","type":"uint256"}],"payable":false,"type":"constructor"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"Buy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"eth","type":"uint256"}],"name":"Withdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateFounderTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateBountyTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"investor","type":"address"},{"indexed":false,"name":"weiAmount","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
var napoleonxcrowdsaleByteCode ='0x60606040526000600555600060065569054b40b1f852bda000006007556934f086f3b33b68400000600855736551f97f7d133083b11c0350c5fa83eefee8000d600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600d60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600e60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506249d4006012556293a8006013556293a8006014556000601560006101000a81548160ff0219169083151502179055506000601560016101000a81548160ff0219169083151502179055506000601560026101000a81548160ff02191690831515021790555034156101ef57600080fd5b604051604080612ebf833981016040528080519060200190919080519060200190919050505b33600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600f8190555062093a80600f54016011819055506224ea0062093a80600f5401016010819055505b50505b612bed806102d26000396000f30060606040523615610244576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde031461067957806308e3a3ef14610708578063095ea7b31461075e57806318160ddd146107b857806319800d1b146107e15780631aae34601461080a5780631bc59aa61461085757806323b872dd146108845780632439a4f6146108fd578063249b7c1914610926578063313ce5671461094f5780633197cbb6146109785780633e0a322d146109a15780634042b66f146109c457806344e02609146109ed578063518ab2a814610a165780635ed7ca5b14610a3f5780636c04ffbc14610a5457806370a0823114610a8057806370dbe91b14610acd57806378e9792514610af657806382846e8414610b1f57806383e811a614610b345780638bf86b8014610b5d578063943762d114610b8657806394d32a5d14610baf57806395d89b4114610bd857806399d22e4814610c675780639c6bdcb514610c945780639f19bc2f14610cb7578063a9059cbb14610cf9578063b7c6566814610d53578063b9b8af0b14610d7c578063bcfcb03e14610da9578063c12f83c514610dbe578063c24fe21b14610e58578063c2e1d45514610e81578063cb3e64fd14610eaa578063ccb98ffc14610ebf578063cfa0136f14610ee2578063d2e9c4a514610f05578063dbe7e6f414610f2e578063dd62ed3e14610f57578063e2646a9f14610fc3578063e9d8d3d714611052578063ea8d738c1461107b578063f662b881146110a4578063fd6b7ef8146110f1575b5b6000806000806000806000806000806000600f5480421015151561026857600080fd5b601054804210151561027957600080fd5b601560009054906101000a900460ff1615151561029557600080fd5b6008546102a460065434611106565b111515156102b157600080fd5b349c50601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b506102ff33611131565b9a506002600a0a9950670de0b6b3a76400008a8e0281151561031d57fe5b049850600a8a60010281151561032f57fe5b04975061033e888a101561117b565b60115442101561043f5760008b141561035657600080fd5b6103608c8e611106565b96508a87101580156103815750600a8b600f0281151561037c57fe5b048711155b1561039c57606460146064018a0281151561039857fe5b0498505b600a8b600f028115156103ab57fe5b0487111561043e57600a8b600f028115156103c257fe5b048c11151561043d576103e4600a8c600f028115156103dd57fe5b048d61118b565b95506103f08d8761118b565b9450670de0b6b3a76400008a870281151561040757fe5b049350670de0b6b3a76400008a860281151561041f57fe5b04925060646014606401850281151561043457fe5b04935083830198505b5b5b601154421015156104665760646104546111a5565b6064018a0281151561046257fe5b0498505b6104ae6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548a611106565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506104fc6002548a611106565b600281905550600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168d60405160006040518083038185876187965a03f192505050151561055f57600080fd5b3373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e8b604051808381526020018281526020019250505060405180910390a26105fe601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e611106565b601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061064d6006548e611106565b60068190555061065f6005548a611106565b6005819055505b5b5b5b505b505050505050505050505050005b341561068457600080fd5b61068c61127e565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156106cd5780820151818401525b6020810190506106b1565b50505050905090810190601f1680156106fa5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561071357600080fd5b610748600480803590602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506112b7565b6040518082815260200191505060405180910390f35b341561076957600080fd5b61079e600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611480565b604051808215151515815260200191505060405180910390f35b34156107c357600080fd5b6107cb611573565b6040518082815260200191505060405180910390f35b34156107ec57600080fd5b6107f4611579565b6040518082815260200191505060405180910390f35b341561081557600080fd5b610841600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061157f565b6040518082815260200191505060405180910390f35b341561086257600080fd5b61086a611597565b604051808215151515815260200191505060405180910390f35b341561088f57600080fd5b6108e3600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506115aa565b604051808215151515815260200191505060405180910390f35b341561090857600080fd5b6109106115d5565b6040518082815260200191505060405180910390f35b341561093157600080fd5b6109396115db565b6040518082815260200191505060405180910390f35b341561095a57600080fd5b6109626115e1565b6040518082815260200191505060405180910390f35b341561098357600080fd5b61098b6115e6565b6040518082815260200191505060405180910390f35b34156109ac57600080fd5b6109c260048080359060200190919050506115ec565b005b34156109cf57600080fd5b6109d7611654565b6040518082815260200191505060405180910390f35b34156109f857600080fd5b610a0061165a565b6040518082815260200191505060405180910390f35b3415610a2157600080fd5b610a29611661565b6040518082815260200191505060405180910390f35b3415610a4a57600080fd5b610a52611667565b005b3415610a5f57600080fd5b610a7e60048080359060200190919080359060200190919050506116e2565b005b3415610a8b57600080fd5b610ab7600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611752565b6040518082815260200191505060405180910390f35b3415610ad857600080fd5b610ae061179b565b6040518082815260200191505060405180910390f35b3415610b0157600080fd5b610b096117a1565b6040518082815260200191505060405180910390f35b3415610b2a57600080fd5b610b326117a7565b005b3415610b3f57600080fd5b610b47611841565b6040518082815260200191505060405180910390f35b3415610b6857600080fd5b610b70611847565b6040518082815260200191505060405180910390f35b3415610b9157600080fd5b610b9961184c565b6040518082815260200191505060405180910390f35b3415610bba57600080fd5b610bc2611852565b6040518082815260200191505060405180910390f35b3415610be357600080fd5b610beb611857565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610c2c5780820151818401525b602081019050610c10565b50505050905090810190601f168015610c595780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3415610c7257600080fd5b610c7a611890565b604051808215151515815260200191505060405180910390f35b3415610c9f57600080fd5b610cb560048080359060200190919050506118a3565b005b3415610cc257600080fd5b610cf7600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611d68565b005b3415610d0457600080fd5b610d39600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611e1a565b604051808215151515815260200191505060405180910390f35b3415610d5e57600080fd5b610d66611e43565b6040518082815260200191505060405180910390f35b3415610d8757600080fd5b610d8f611eb6565b604051808215151515815260200191505060405180910390f35b3415610db457600080fd5b610dbc611ec9565b005b3415610dc957600080fd5b610e56600480803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091908035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919050506120b2565b005b3415610e6357600080fd5b610e6b612185565b6040518082815260200191505060405180910390f35b3415610e8c57600080fd5b610e9461218b565b6040518082815260200191505060405180910390f35b3415610eb557600080fd5b610ebd612190565b005b3415610eca57600080fd5b610ee0600480803590602001909190505061220b565b005b3415610eed57600080fd5b610f036004808035906020019091905050612273565b005b3415610f1057600080fd5b610f186111a5565b6040518082815260200191505060405180910390f35b3415610f3957600080fd5b610f416122db565b6040518082815260200191505060405180910390f35b3415610f6257600080fd5b610fad600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506122e7565b6040518082815260200191505060405180910390f35b3415610fce57600080fd5b610fd661236f565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156110175780820151818401525b602081019050610ffb565b50505050905090810190601f1680156110445780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561105d57600080fd5b6110656124bf565b6040518082815260200191505060405180910390f35b341561108657600080fd5b61108e6124c6565b6040518082815260200191505060405180910390f35b34156110af57600080fd5b6110db600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611131565b6040518082815260200191505060405180910390f35b34156110fc57600080fd5b6111046124cb565b005b60008082840190506111268482101580156111215750838210155b61117b565b8091505b5092915050565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b80151561118757600080fd5b5b50565b60006111998383111561117b565b81830390505b92915050565b600080600f544210806111ba57506010544210155b156111ca576111c9600061117b565b5b601490504262015180600f540110806111ee5750690878678326eac9000000600654115b156111f857600f90505b426201fa40600f540110806112185750690cb49b44ba602d800000600654115b1561122257600a90505b426202a300600f5401108061124257506910f0cf064dd592000000600654115b1561124c57600590505b426203f480600f5401108061126c575069152d02c7e14af6800000600654115b1561127657600090505b8091505b5090565b6040805190810160405280600f81526020017f4e61706f6c656f6e5820546f6b656e000000000000000000000000000000000081525081565b6000806000806000806000806000806000601660008d73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205499506113138c611131565b98506002600a0a9750670de0b6b3a7640000888e0281151561133157fe5b049650600a8860010281151561134357fe5b0495506113528688101561117b565b601154421015611445576113668a8e611106565b94508885101580156113875750600a89600f0281151561138257fe5b048511155b156113a25760646014606401880281151561139e57fe5b0496505b600a89600f028115156113b157fe5b0485111561144457600a89600f028115156113c857fe5b048a111515611443576113ea600a8a600f028115156113e357fe5b048b61118b565b93506113f68d8561118b565b9250670de0b6b3a764000088850281151561140d57fe5b049150670de0b6b3a764000088840281151561142557fe5b04905060646014606401830281151561143a57fe5b04915081810196505b5b5b6011544210151561146c57606461145a6111a5565b606401880281151561146857fe5b0496505b869a505b5050505050505050505092915050565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b60045481565b60166020528060005260406000206000915090505481565b601560029054906101000a900460ff1681565b600060125460105401421115156115c057600080fd5b6115cb8484846126ba565b90505b9392505050565b60075481565b60115481565b600281565b60105481565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561164857600080fd5b80600f819055505b5b50565b60065481565b62093a8081565b60055481565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156116c357600080fd5b6001601560006101000a81548160ff0219169083151502179055505b5b565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561173e57600080fd5b81600781905550806008819055505b5b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b60145481565b600f5481565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561180357600080fd5b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60135481565b600181565b60085481565b601481565b6040805190810160405280600381526020017f4e5058000000000000000000000000000000000000000000000000000000000081525081565b601560019054906101000a900460ff1681565b6000600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561190157600080fd5b601454601054014211151561191557600080fd5b601560029054906101000a900460ff161561192f57600080fd5b6064826002540281151561193f57fe5b0490506119b8600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546004838115156119b257fe5b04611106565b600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611a34600254600483811515611a2e57fe5b04611106565b600281905550611ab0600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611aaa57fe5b04611106565b600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611b2c600254600483811515611b2657fe5b04611106565b600281905550611ba8600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611ba257fe5b04611106565b600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611c24600254600483811515611c1e57fe5b04611106565b600281905550611ca0600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611c9a57fe5b04611106565b600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001601560026101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167fdd56998c270d613b449ef9fc57334482404fda530366a65772674a9da84da20860405160405180910390a25b5b5050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050611db860045483611106565b600481905550611dca6004548261118b565b60048190555081600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505050565b60006012546010540142111515611e3057600080fd5b611e3a83836129b5565b90505b92915050565b600080600f9050690878678326eac90000006006541115611e6357600a90505b690cb49b44ba602d8000006006541115611e7c57600890505b6910f0cf064dd5920000006006541115611e9557600590505b69152d02c7e14af68000006006541115611eae57600390505b8091505b5090565b601560009054906101000a900460ff1681565b6000600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611f2757600080fd5b6013546010540142111515611f3b57600080fd5b601560019054906101000a900460ff1615611f5557600080fd5b6064611f5f611e43565b60025402811515611f6c57fe5b049050611fd9600080600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611106565b600080600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061204960025482611106565b6002819055506001601560016101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f1c8a3821e439862f28669f7fbc210e74e947ebf0e947b591cc5a02e41003026560405160405180910390a25b5b50565b6000600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561211057600080fd5b828261211c8282612b9d565b151561212757600080fd5b600092505b845183101561217b5761216d858481518110151561214657fe5b90602001906020020151858581518110151561215e57fe5b90602001906020020151611d68565b5b828060010193505061212c565b5b5b50505b505050565b60125481565b601481565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156121ec57600080fd5b6000601560006101000a81548160ff0219169083151502179055505b5b565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561226757600080fd5b806010819055505b5b50565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156122cf57600080fd5b806011819055505b5b50565b670de0b6b3a764000081565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b92915050565b612377612bad565b600f544210156123be576040805190810160405280600981526020017f4e6f7420626567756e000000000000000000000000000000000000000000000081525090506124bc565b601154421015612405576040805190810160405280600f81526020017f50726573616c652072756e6e696e67000000000000000000000000000000000081525090506124bc565b60105442101561247357606060405190810160405280602381526020017f50726573616c6520656e6465642c207374616e646172642049434f2072756e6e81526020017f696e67000000000000000000000000000000000000000000000000000000000081525090506124bc565b601054421015156124bb576040805190810160405280600c81526020017f49434f2066696e6973686564000000000000000000000000000000000000000081525090506124bc565b5b90565b6224ea0081565b600a81565b6000806010548042101515156124e057600080fd5b6007546006541015925082151561267257601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205491506000601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000821115612671573373ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f193505050501561262b577fbb28353e4598c3b9199101a66e0989549b659a59a54d2c27fbb183f1932c8e6d3383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1612670565b81601660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b5b82156126b357600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b5b505050565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612786575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410155b801561280f57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b156129a457816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190506129ae565b600090506129ae565b5b9392505050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612a8257506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15612b8d57816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612b97565b60009050612b97565b5b92915050565b6000815183511490505b92915050565b6020604051908101604052806000815250905600a165627a7a72305820f20d5bb9cd3a9481ddcf39d072af4bcfad28268e5b73ebedd8a881348bdd35410029';


let napoleonxcrowdsaleGasEstimate = web3.eth.estimateGas({
    data: napoleonxcrowdsaleByteCode
});

console.log(napoleonxcrowdsaleGasEstimate);
web3.personal.unlockAccount(account,unlockingPassword, 1000);
console.log(account);

var napoleonxcrowdsaleContract = web3.eth.contract(napoleonxcrowdsaleAbi);
var napoleonxcrowdsaleContractInstance = napoleonxcrowdsaleContract.new(
   napoleonXMultiSigWalletAddress,
   setStartTime,
   {
     from : account,
     data : napoleonxcrowdsaleByteCode,
     gas :  napoleonxcrowdsaleGasEstimate+1000000
   }, function (err, myContract){
    if (!err) {
        // NOTE: The callback will fire twice!
        // Once the contract has the transactionHash property set and once its deployed on an address.

        // e.g. check tx hash on the first call (transaction send)
        if (!myContract.address) {
            console.log("TransactionHash")
            console.log(myContract.transactionHash) // The hash of the transaction, which deploys the contract

            // check address on the second call (contract deployed)
        } else {
            console.log("Contract deployed at :"+myContract.address);
            //console.log(myContract.address) // the contract address
            //exports.contractAddress = myContract.address;
        }

        // Note that the returned "myContractReturned" === "myContract",
        // so the returned "myContractReturned" object will also get the address set.
    }
    else{
      console.log(err);
    }
 });


var MyReceipt = web3.eth.getTransactionReceiptMined(napoleonxcrowdsaleContractInstance.transactionHash);

// Transaction has entered to geth memory pool
console.log("Your contract is being deployed in transaction at http://ropsten.etherscan.io/tx/" + napoleonxcrowdsaleContractInstance.transactionHash);
